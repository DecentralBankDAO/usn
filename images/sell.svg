<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="442px" preserveAspectRatio="none" style="width:487px;height:442px;background:#FFFFFF;" version="1.1" viewBox="0 0 487 442" width="487px" zoomAndPan="magnify"><defs><filter height="300%" id="f1g4rr2okdf1xf" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="77" x="203.25" y="28.708">Sell USN</text><rect fill="#FFFFFF" filter="url(#f1g4rr2okdf1xf)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="288.5" y="165.7813"/><rect fill="#FFFFFF" filter="url(#f1g4rr2okdf1xf)" height="59.2656" style="stroke:#000000;stroke-width:2.0;" width="348" x="125.5" y="252.0469"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="29" x2="29" y1="75.25" y2="399.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="157.5" x2="157.5" y1="75.25" y2="399.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="293.5" x2="293.5" y1="75.25" y2="399.5781"/><rect fill="#FEFECE" filter="url(#f1g4rr2okdf1xf)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="45" x="5" y="39.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="12" y="59.9482">alice</text><rect fill="#FEFECE" filter="url(#f1g4rr2okdf1xf)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="45" x="5" y="398.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="12" y="418.5732">alice</text><rect fill="#FEFECE" filter="url(#f1g4rr2okdf1xf)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="40" x="135.5" y="39.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="142.5" y="59.9482">usn</text><rect fill="#FEFECE" filter="url(#f1g4rr2okdf1xf)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="40" x="135.5" y="398.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="142.5" y="418.5732">usn</text><rect fill="#FEFECE" filter="url(#f1g4rr2okdf1xf)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="90" x="246.5" y="39.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="253.5" y="59.9482">priceoracle</text><rect fill="#FEFECE" filter="url(#f1g4rr2okdf1xf)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="90" x="246.5" y="398.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="253.5" y="418.5732">priceoracle</text><rect fill="#FFFFFF" filter="url(#f1g4rr2okdf1xf)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="288.5" y="165.7813"/><polygon fill="#A80036" points="145.5,132.6484,155.5,136.6484,145.5,140.6484,149.5,136.6484" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="29.5" x2="151.5" y1="136.6484" y2="136.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="36.5" y="101.3169">USN amount</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="36.5" y="116.4497">+ expected rate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="36.5" y="131.5825">+ slippage</text><polygon fill="#A80036" points="276.5,161.7813,286.5,165.7813,276.5,169.7813,280.5,165.7813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="157.5" x2="282.5" y1="165.7813" y2="165.7813"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="112" x="164.5" y="160.7153">get_price_data</text><polygon fill="#A80036" points="168.5,190.9141,158.5,194.9141,168.5,198.9141,164.5,194.9141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="162.5" x2="292.5" y1="194.9141" y2="194.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="174.5" y="189.8481">NEAR/USDT rate</text><line style="stroke:#A80036;stroke-width:1.0;" x1="157.5" x2="199.5" y1="224.0469" y2="224.0469"/><line style="stroke:#A80036;stroke-width:1.0;" x1="199.5" x2="199.5" y1="224.0469" y2="237.0469"/><line style="stroke:#A80036;stroke-width:1.0;" x1="158.5" x2="199.5" y1="237.0469" y2="237.0469"/><polygon fill="#A80036" points="168.5,233.0469,158.5,237.0469,168.5,241.0469,164.5,237.0469" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="164.5" y="218.981">verify timestamp</text><path d="M125.5,252.0469 L189.5,252.0469 L189.5,259.0469 L179.5,269.0469 L125.5,269.0469 L125.5,252.0469 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="59.2656" style="stroke:#000000;stroke-width:2.0;" width="348" x="125.5" y="252.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="140.5" y="265.1138">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="264" x="204.5" y="264.2573">[If expected rate and slippage is passed]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="157.5" x2="199.5" y1="290.3125" y2="290.3125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="199.5" x2="199.5" y1="290.3125" y2="303.3125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="158.5" x2="199.5" y1="303.3125" y2="303.3125"/><polygon fill="#A80036" points="168.5,299.3125,158.5,303.3125,168.5,307.3125,164.5,303.3125" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="164.5" y="285.2466">assert slippage</text><line style="stroke:#A80036;stroke-width:1.0;" x1="157.5" x2="199.5" y1="339.4453" y2="339.4453"/><line style="stroke:#A80036;stroke-width:1.0;" x1="199.5" x2="199.5" y1="339.4453" y2="352.4453"/><line style="stroke:#A80036;stroke-width:1.0;" x1="158.5" x2="199.5" y1="352.4453" y2="352.4453"/><polygon fill="#A80036" points="168.5,348.4453,158.5,352.4453,168.5,356.4453,164.5,352.4453" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="164.5" y="334.3794">burn USN</text><polygon fill="#A80036" points="40.5,377.5781,30.5,381.5781,40.5,385.5781,36.5,381.5781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="34.5" x2="156.5" y1="381.5781" y2="381.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="46.5" y="376.5122">send NEAR</text><!--MD5=[dc3f99226cd0d8232f58cc2bb351ed07]
@startuml

title Sell USN

alice -> usn: USN amount\n+ expected rate\n+ slippage

usn -> priceoracle: ""get_price_data""
activate priceoracle
usn <- priceoracle: NEAR/USDT rate
deactivate priceoracle
usn -> usn: verify timestamp

alt If expected rate and slippage is passed
usn -> usn: assert slippage
end

usn -> usn: burn USN
alice <- - usn: send NEAR
@enduml

PlantUML version 1.2022.0(Tue Jan 11 18:16:42 EET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>